(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&a(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function a(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();const d={duration:1e3,cardSelector:".js-cards",shuffleDelay:400},i={flipped:"flipped",matched:"has-match",noEvent:"no-event",srOnly:"sr-only"},c={role:{button:"button",status:"status"},live:{polite:"polite"}};class h{constructor(e={}){if(this.config={...d,...e},this.gameState={moves:0,matches:0,isProcessing:!1},this.cardsContainer=document.querySelector(this.config.cardSelector),!this.cardsContainer)throw new Error(`Cards container not found with selector: ${this.config.cardSelector}`);if(this.cards=Array.from(this.cardsContainer.children),this.cards.length===0)throw new Error("No cards found in the container");this.init()}init(){let e=!1;const t=a=>{if(a.type==="touchend"&&(e=!0,setTimeout(()=>{e=!1},500)),a.type==="click"&&e)return;const s=a.target.closest(".game__card");s&&this.canFlipCard(s)&&(a.type==="touchend"&&a.preventDefault(),this.flip(s))};this.cardsContainer.addEventListener("click",t),this.cardsContainer.addEventListener("touchend",t),this.cards.forEach((a,s)=>{a.setAttribute("tabindex","0"),a.setAttribute("role",c.role.button),a.setAttribute("aria-label",`Card ${s+1}`),a.addEventListener("keydown",r=>{(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),this.canFlipCard(a)&&this.flip(a))})})}canFlipCard(e){return!e.classList.contains(i.flipped)&&!e.classList.contains(i.matched)&&!this.gameState.isProcessing}shuffleCards(){this.cards.forEach(e=>{const t=Math.floor(Math.random()*this.cards.length)+1;e.classList.remove(i.matched),e.setAttribute("aria-label",`Card ${t}`),setTimeout(()=>{e.style.order=`${t}`},this.config.shuffleDelay)}),this.gameState.moves=0,this.gameState.matches=0,this.announceToScreenReader("Cards shuffled! New game started.")}checkAllCards(){this.cards.every(e=>e.classList.contains(i.matched))&&(this.announceToScreenReader(`Congratulations! All cards matched in ${this.gameState.moves} moves!`),setTimeout(()=>{this.shuffleCards()},this.config.duration))}stopEvent(){this.gameState.isProcessing=!0,this.cardsContainer.classList.add(i.noEvent),setTimeout(()=>{this.cardsContainer.classList.remove(i.noEvent),this.gameState.isProcessing=!1},this.config.duration)}checkIfMatched(e,t){const a=e.dataset.animal,s=t.dataset.animal;a===s?(e.classList.remove(i.flipped),t.classList.remove(i.flipped),e.classList.add(i.matched),t.classList.add(i.matched),e.setAttribute("aria-label",`Card matched: ${a}`),t.setAttribute("aria-label",`Card matched: ${s}`),this.gameState.matches++,this.announceToScreenReader(`Match found! ${this.gameState.matches} matches so far.`),this.checkAllCards()):(this.announceToScreenReader("No match. Cards will flip back."),setTimeout(()=>{e.classList.remove(i.flipped),t.classList.remove(i.flipped)},this.config.duration))}flip(e){e.classList.add(i.flipped),this.gameState.moves++;const t=this.cards.filter(a=>a.classList.contains(i.flipped));t.length===2&&(this.stopEvent(),this.checkIfMatched(t[0],t[1]))}announceToScreenReader(e){const t=document.createElement("div");t.setAttribute("role",c.role.status),t.setAttribute("aria-live",c.live.polite),t.className=i.srOnly,t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.removeChild(t)},1e3)}getStats(){return{moves:this.gameState.moves,matches:this.gameState.matches,totalPairs:this.cards.length/2,isComplete:this.cards.every(e=>e.classList.contains(i.matched))}}reset(){this.shuffleCards()}}function l(){try{return new h}catch(n){throw console.error("Failed to initialize game:",n),alert("Failed to start the game. Please refresh the page."),n}}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",l):l();
//# sourceMappingURL=main-6zKjJZFm.js.map
